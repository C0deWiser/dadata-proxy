# Dadata Proxy

Это Self-Hosted приложение, которое проксирует запросы к datdata.ru и 
кеширует ответы на время, которым вы сами можете управлять.

Интерфейс API полностью повторяет интерфейс API dadata.ru, то есть вам 
достаточно просто изменить `BASE_URL` в клиенте dadata и всё будет работать, 
как будто и нет никого между вами.

Использование этого прокси позволяет экономить на платных запросах к 
`clean/name` или `clean/phone`. 

Допустим одно приложение нормализовало имя `иванов иван 
иванович`, заплатив за это копеечку. В следующий раз это же или другое 
приложение нормализует это же имя, но уже бесплатно, потому что получит 
ранее сохраненный ответ.

## Управление кешированием

Если сделать запрос, как он описан в документации dadata, то ответ будет 
закеширован прокси и впредь будет возвращаться из кеша, без запросов к dadata.

Если в запросе передать заголовок `Cache-Control` с параметром `max-age` (в 
секундах), то ответ из кеша будет использован только если он не старше 
указанного возраста. В противном случае будет выполнен запрос к dadata и 
кеш будет обновлён свежим ответом.

```http request
POST /api/v1/clean/name HTTP/1.1
Host: example.com
Content-Type: application/json
Accept: application/json
Authorization: Token {token}
X-Secret: {secret}
Cache-Control: max-age=600

["иванов иван иванович"]
```

## Кешируемые сервисы

* [стандартизация ФИО](https://dadata.ru/api/clean/name/)

